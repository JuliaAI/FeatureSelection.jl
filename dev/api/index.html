<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · FeatureSelection.jl</title><meta name="title" content="API · FeatureSelection.jl"/><meta property="og:title" content="API · FeatureSelection.jl"/><meta property="twitter:title" content="API · FeatureSelection.jl"/><meta name="description" content="Documentation for FeatureSelection.jl."/><meta property="og:description" content="Documentation for FeatureSelection.jl."/><meta property="twitter:description" content="Documentation for FeatureSelection.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FeatureSelection.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Models"><span>Models</span></a></li><li class="toplevel"><a class="tocitem" href="#Internal-Utils"><span>Internal Utils</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaAI/FeatureSelection.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaAI/FeatureSelection.jl/blob/dev/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h1 id="Models"><a class="docs-heading-anchor" href="#Models">Models</a><a id="Models-1"></a><a class="docs-heading-anchor-permalink" href="#Models" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FeatureSelection.FeatureSelector" href="#FeatureSelection.FeatureSelector"><code>FeatureSelection.FeatureSelector</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FeatureSelector</code></pre><p>A model type for constructing a feature selector, based on <a href="https://github.com/JuliaAI/FeatureSelection.jl">FeatureSelection.jl</a>, and implementing the MLJ model interface.</p><p>From MLJ, the type can be imported using</p><pre><code class="nohighlight hljs">FeatureSelector = @load FeatureSelector pkg=FeatureSelection</code></pre><p>Do <code>model = FeatureSelector()</code> to construct an instance with default hyper-parameters. Provide keyword arguments to override hyper-parameter defaults, as in <code>FeatureSelector(features=...)</code>.</p><p>Use this model to select features (columns) of a table, usually as part of a model <code>Pipeline</code>.</p><p><strong>Training data</strong></p><p>In MLJ or MLJBase, bind an instance <code>model</code> to data with</p><pre><code class="nohighlight hljs">mach = machine(model, X)</code></pre><p>where</p><ul><li><code>X</code>: any table of input features, where &quot;table&quot; is in the sense of Tables.jl</li></ul><p>Train the machine using <code>fit!(mach, rows=...)</code>.</p><p><strong>Hyper-parameters</strong></p><ul><li><p><code>features</code>: one of the following, with the behavior indicated:</p><ul><li><p><code>[]</code> (empty, the default): filter out all features (columns) which were not encountered in training</p></li><li><p>non-empty vector of feature names (symbols): keep only the specified features (<code>ignore=false</code>) or keep only unspecified features (<code>ignore=true</code>)</p></li><li><p>function or other callable: keep a feature if the callable returns <code>true</code> on its name. For example, specifying <code>FeatureSelector(features = name -&gt; name in [:x1, :x3], ignore = true)</code> has the same effect as <code>FeatureSelector(features = [:x1, :x3], ignore = true)</code>, namely to select all features, with the exception of <code>:x1</code> and <code>:x3</code>.</p></li></ul></li><li><p><code>ignore</code>: whether to ignore or keep specified <code>features</code>, as explained above</p></li></ul><p><strong>Operations</strong></p><ul><li><code>transform(mach, Xnew)</code>: select features from the table <code>Xnew</code> as specified by the model, taking features seen during training into account, if relevant</li></ul><p><strong>Fitted parameters</strong></p><p>The fields of <code>fitted_params(mach)</code> are:</p><ul><li><code>features_to_keep</code>: the features that will be selected</li></ul><p><strong>Example</strong></p><pre><code class="nohighlight hljs">using MLJ

X = (ordinal1 = [1, 2, 3],
     ordinal2 = coerce([&quot;x&quot;, &quot;y&quot;, &quot;x&quot;], OrderedFactor),
     ordinal3 = [10.0, 20.0, 30.0],
     ordinal4 = [-20.0, -30.0, -40.0],
     nominal = coerce([&quot;Your father&quot;, &quot;he&quot;, &quot;is&quot;], Multiclass));

selector = FeatureSelector(features=[:ordinal3, ], ignore=true);

julia&gt; transform(fit!(machine(selector, X)), X)
(ordinal1 = [1, 2, 3],
 ordinal2 = CategoricalValue{Symbol,UInt32}[&quot;x&quot;, &quot;y&quot;, &quot;x&quot;],
 ordinal4 = [-20.0, -30.0, -40.0],
 nominal = CategoricalValue{String,UInt32}[&quot;Your father&quot;, &quot;he&quot;, &quot;is&quot;],)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/FeatureSelection.jl/blob/ea15bf3aa2b13b5349858fcc7b3015b2f8605a2b/src/models/featureselector.jl#L101-L116">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FeatureSelection.RecursiveFeatureElimination" href="#FeatureSelection.RecursiveFeatureElimination"><code>FeatureSelection.RecursiveFeatureElimination</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">RecursiveFeatureElimination(model, n_features, step)</code></pre><p>This model implements a recursive feature elimination algorithm for feature selection. It recursively removes features, training a base model on the remaining features and evaluating their importance until the desired number of features is selected.</p><p>Construct an instance with default hyper-parameters using the syntax <code>rfe_model = RecursiveFeatureElimination(model=...)</code>. Provide keyword arguments to override hyper-parameter defaults.</p><p><strong>Training data</strong></p><p>In MLJ or MLJBase, bind an instance <code>rfe_model</code> to data with</p><pre><code class="nohighlight hljs">mach = machine(rfe_model, X, y)</code></pre><p>OR, if the base model supports weights, as</p><pre><code class="nohighlight hljs">mach = machine(rfe_model, X, y, w)</code></pre><p>Here:</p><ul><li><p><code>X</code> is any table of input features (eg, a <code>DataFrame</code>) whose columns are of the scitype as that required by the base model; check column scitypes with <code>schema(X)</code> and column scitypes required by base model with <code>input_scitype(basemodel)</code>.</p></li><li><p><code>y</code> is the target, which can be any table of responses whose element scitype is   <code>Continuous</code> or <code>Finite</code> depending on the <code>target_scitype</code> required by the base model;   check the scitype with <code>scitype(y)</code>.</p></li><li><p><code>w</code> is the observation weights which can either be <code>nothing</code>(default) or an <code>AbstractVector</code> whoose element scitype is <code>Count</code> or <code>Continuous</code>. This is different from <code>weights</code> kernel which is an hyperparameter to the model, see below.</p></li></ul><p>Train the machine using <code>fit!(mach, rows=...)</code>.</p><p><strong>Hyper-parameters</strong></p><ul><li><p>model: A base model with a <code>fit</code> method that provides information on feature feature importance (i.e <code>reports_feature_importances(model) == true</code>)</p></li><li><p>n_features::Real = 0: The number of features to select. If <code>0</code>, half of the features are selected. If a positive integer, the parameter is the absolute number of features to select. If a real number between 0 and 1, it is the fraction of features to select.</p></li><li><p>step::Real=1: If the value of step is at least 1, it signifies the quantity of features to eliminate in each iteration. Conversely, if step falls strictly within the range of 0.0 to 1.0, it denotes the proportion (rounded down) of features to remove during each iteration.</p></li></ul><p><strong>Operations</strong></p><ul><li><code>transform(mach, X)</code>: transform the input table <code>X</code> into a new table containing only</li></ul><p>columns corresponding to features gotten from the RFE algorithm.</p><ul><li><p><code>predict(mach, X)</code>: transform the input table <code>X</code> into a new table same as in</p></li><li><p><code>transform(mach, X)</code> above and predict using the fitted base model on the transformed table.</p></li></ul><p><strong>Fitted parameters</strong></p><p>The fields of <code>fitted_params(mach)</code> are:</p><ul><li><p><code>features_left</code>: names of features remaining after recursive feature elimination.</p></li><li><p><code>model_fitresult</code>: fitted parameters of the base model.</p></li></ul><p><strong>Report</strong></p><p>The fields of <code>report(mach)</code> are:</p><ul><li><p><code>scores</code>: dictionary of scores for each feature in the training dataset. The model deems highly scored variables more significant. </p></li><li><p><code>model_report</code>: report for the fitted base model.</p></li></ul><p><strong>Examples</strong></p><pre><code class="nohighlight hljs">using FeatureSelection, MLJ, StableRNGs

RandomForestRegressor = @load RandomForestRegressor pkg=DecisionTree

# Creates a dataset where the target only depends on the first 5 columns of the input table.
A = rand(rng, 50, 10);
y = 10 .* sin.(
        pi .* A[:, 1] .* A[:, 2]
    ) + 20 .* (A[:, 3] .- 0.5).^ 2 .+ 10 .* A[:, 4] .+ 5 * A[:, 5]);
X = MLJ.table(A);

# fit a rfe model
rf = RandomForestRegressor()
selector = RecursiveFeatureElimination(model = rf)
mach = machine(selector, X, y)
fit!(mach)

# view the feature importances
feature_importances(mach)

# predict using the base model
Xnew = MLJ.table(rand(rng, 50, 10));
predict(mach, Xnew)
</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/FeatureSelection.jl/blob/ea15bf3aa2b13b5349858fcc7b3015b2f8605a2b/src/models/rfe.jl#L43-L143">source</a></section></article><h1 id="Internal-Utils"><a class="docs-heading-anchor" href="#Internal-Utils">Internal Utils</a><a id="Internal-Utils-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-Utils" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FeatureSelection.abs_last" href="#FeatureSelection.abs_last"><code>FeatureSelection.abs_last</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">abs_last(x)</code></pre><p>Get the absolute value of the second element in a <code>Pair</code> object <code>x</code>.</p><p><strong>Arguments</strong></p><ul><li><code>x::Pair{&lt;:Any, &lt;:Real}</code>: A <code>Pair</code> object from which the absolute value of the second element is to be retrieved.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">julia&gt; abs_last(1 =&gt; -5)
5</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/FeatureSelection.jl/blob/ea15bf3aa2b13b5349858fcc7b3015b2f8605a2b/src/models/rfe.jl#L198-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FeatureSelection.score_features!" href="#FeatureSelection.score_features!"><code>FeatureSelection.score_features!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">score_features!(scores_dict, features, importances, n_features_to_score)</code></pre><p>Internal method that updates the <code>scores_dict</code> by increasing the score for each feature based on their  importance and store the features in the <code>features</code> array.</p><p><strong>Arguments</strong></p><ul><li><code>scores_dict::Dict{Symbol, Int}</code>: A dictionary where the keys are features and  the values are their corresponding scores.</li><li><code>features::Vector{Symbol}</code>: An array to store the top features based on importance.</li><li><code>importances::Vector{Pair(Symbol, &lt;:Real)}}</code>: An array of tuples where each tuple  contains a feature and its importance score. </li><li><code>n_features_to_score::Int</code>: The number of top features to score and store.</li></ul><p><strong>Notes</strong></p><p>Ensure that <code>n_features_to_score</code> is less than or equal to the minimum of the  lengths of <code>features</code> and <code>importances</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">scores_dict = Dict(:feature1 =&gt; 0, :feature2 =&gt; 0, :feature3 =&gt; 0)
features = [:x1, :x1, :x1]
importances = [:feature1 =&gt; 0.9, :feature2 =&gt; 0.8, :feature3 =&gt; 0.7]
n_features_to_score = 2

score_features!(scores_dict, features, importances, n_features_to_score)
scores_dict == Dict(:feature1 =&gt; 1, :feature2 =&gt; 1, :feature3 =&gt; 0)
features == [:feature1, :feature2, :x1]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaAI/FeatureSelection.jl/blob/ea15bf3aa2b13b5349858fcc7b3015b2f8605a2b/src/models/rfe.jl#L214-L243">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 9 July 2024 23:29">Tuesday 9 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
